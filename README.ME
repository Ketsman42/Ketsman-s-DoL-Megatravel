````markdown
<div align="center">

# 🌌 Ketsman's DoL **Megatravel**

**Instant Teleport & Unlimited Movement** for *Degrees of Lewdity*

[![Userscript](https://img.shields.io/badge/type-Userscript-2ea44f)](#-what-is-this)
[![Manager](https://img.shields.io/badge/manager-Tampermonkey-blue)](#-installation)
[![Version](https://img.shields.io/badge/version-1.2.1-important)](#-changelog)
[![Build](https://img.shields.io/badge/Test%20Build-2376-7bff5f)](#-changelog)
[![DoL](https://img.shields.io/badge/DoL-0.5.4.9%2B-6f42c1)](#-compatibility)
[![Status](https://img.shields.io/badge/status-Beta-yellow)](#-status--disclaimer)

</div>

> **Megatravel** adds a powerful **Instant Teleport menu** (hotkey based) to instantly jump to **any passage** in the game. Includes unlimited movement, search, favorites, and recents.

---

## 🧭 Table of Contents
- [What is this](#-what-is-this)
- [Features](#-features)
- [Installation](#-installation)
- [Quick Start](#-quick-start)
- [Hotkeys](#-hotkeys)
- [How it works](#-how-it-works)
- [Storage](#-storage)
- [Compatibility](#-compatibility)
- [FAQ](#-faq)
- [Known Limitations](#-known-limitations)
- [Troubleshooting](#-troubleshooting)
- [Roadmap](#-roadmap)
- [Changelog](#-changelog)
- [Contributing & License](#-contributing--license)
- [Community](#-community)

---

## 💡 What is this
**Megatravel** is a userscript for *Degrees of Lewdity* (SugarCube engine), which:
- provides an **Instant Teleport modal menu** opened via hotkey;
- allows you to **jump instantly** ("TP") to any passage;
- supports **favorites** (PIN ★) and **recents**;
- respects location tags and **hides system passages**.

---

## ✨ Features
- **Unlimited movement** — toggle in map settings.
- **Instant Teleport menu** — hotkey based, no UI clutter.
- **Search by passage name** + filter: *All*, *Favorites*, *Recent*, categories (Town, School, Forest, Lake/River, Farm, Temple, Prison, Dungeons, Home/Orphanage, Work/Shops, Events/Scenes, Other).
- **Location priority** — location-tagged passages (`map/location/area/place/room`) appear first.
- **Infinite scroll** — results are loaded in chunks of 200.
- **Favorites (★PIN)** — pin important locations.
- **Recents** — quick access to the last 20 teleports.
- **Hotkey** — `Ctrl + Shift + M` (supports both `M` and `Ь`).
- **Lightweight** — no save interference, uses only `localStorage`.
- **Zero Grants** — `@grant none`, no external permissions.

---

## ⚙️ Installation
1. Install **Tampermonkey** (Chrome/Edge/Firefox/Opera).
2. Create a new userscript and paste the contents of `Ketsman_DoL_Megatravel.user.js`.
3. Save — Tampermonkey will auto-activate it for DoL HTML pages.

> **Local `file://` files are also supported** for offline builds.

### Userscript Header
```js
// ==UserScript==
// @name         Ketsman's DoL Megatravel
// @namespace    http://tampermonkey.net/
// @version      1.2.1
// @description  Adds unlimited movement option and a Megatravel menu to jump instantly to any passage. Test Build 2376.
// @author       Ketsman
// @match        *://*/*Degrees*of*Lewdity*0.5.4.9*.html*
// @match        *://*/*Degrees*of*Lewdity*.html*
// @match        file:///*Degrees*of*Lewdity*0.5.4.9*.html*
// @match        file:///*Degrees*of*Lewdity*.html*
// @run-at       document-idle
// @grant        none
// @noframes
// ==/UserScript==
````

---

## 🚀 Quick Start

* Launch the game → use the hotkey **`Ctrl + Shift + M`** to open **Instant Teleport**.
* Search for any passage → click **TP** to instantly jump there.
* Pin favorite passages with **★PIN**.

---

## ⌨️ Hotkeys

* **Open/close Instant Teleport**: `Ctrl + Shift + M`
  (supports `M`/`Ь`, keyCodes `77/219`).

---

## 🛠 How it works

* Waits for **SugarCube.Engine** & **Story** to be ready.
* Collects all passages (via `SugarCube.Story.passages` or `tw-passagedata`).
* Applies categorization rules and filters system passages.
* Provides a fast `engine.play(passageName)` trigger with fallbacks.
* Modal includes: **Search**, **Categories**, **Only locations toggle**, **Favorites**, **Recents**, infinite scrolling.

---

## 🧩 Storage

* `dol.megatravel.enabled` — enable/disable unlimited movement.
* `dol.megatravel.favs` — list of favorite passages.
* `dol.megatravel.recents` — last 20 jumps.

**Reset**: clear these keys via browser DevTools → Application → Local Storage.

---

## 🔗 Compatibility

* **DoL 0.5.4.9+** (SugarCube).
* Works with online and offline HTML builds.
* No external libraries, no network requests.

---

## ❓ FAQ

**Q: Is this a cheat?**
A: It’s primarily a tool for **testing and modding**. You choose how to use it.

**Q: Does it break saves?**
A: No. Uses only `localStorage` for its own data.

**Q: How do I disable quickly?**
A: A toggle is added under **Settings → Map settings**.

**Q: Missing some passages?**
A: Disable **Only locations** filter and try again.

---

## ⚠️ Known Limitations

* Categorization is heuristic-based (keywords in name/tags).
* Non-standard builds may expose unexpected system passages.
* Large mods → initial indexing may take a moment.

---

## 🧯 Troubleshooting

* **Hotkey not working**: ensure Tampermonkey script is enabled.
* **No modal appears**: check `window.SugarCube` in console.
* **Teleport not working**: forks may require different `engine.play` logic.
* **Reset favorites/recents**: clear `dol.megatravel.*` keys in `localStorage`.

---

## 🗺 Roadmap

* [ ] Custom user categories & labels.
* [ ] Export/import favorites.
* [ ] UI filter rule editor.
* [ ] Wider engine compatibility.

---

## 📝 Changelog

**1.2.1 — Test Build 2376**

* New **Instant Teleport modal**.
* Hotkey `Ctrl+Shift+M`.
* Categories, favorites ★, recents.
* Infinite scroll (200 per page), *Only locations* filter.
* Toggle in map settings: **Enable unlimited movement**.

---

## 🤝 Contributing & License

* Issues/PRs welcome — improve categories, add translations, suggest tweaks.
* License: **MIT**.

---

## 🧪 Status & Disclaimer

* Status: **Beta** — expect rough edges in non-standard builds.
* Intended **only** for testing/modding purposes in *Degrees of Lewdity*.

---

## 💬 Community

Join the DoL modding Discord → **[discord.gg/mGpRSn9qMF](https://discord.gg/mGpRSn9qMF)**

---

<div align="center">

**For testers and modders, with ❤️**
*— Ketsman*

</div>
```
